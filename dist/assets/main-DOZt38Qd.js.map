{"version":3,"file":"main-DOZt38Qd.js","sources":["../../src/main.ts"],"sourcesContent":["/**\r\n * Main Entry Point for Vite\r\n * \r\n * This file is the entry point referenced by index.html.\r\n * Vite will compile and bundle this TypeScript into browser-compatible JavaScript.\r\n */\r\n\r\nimport './main.css';\r\nimport { P2PGameRoom } from './p2p/browserRoom';\r\nimport { P2PGameClient } from './p2p/browserClient';\r\nimport { ActionType, GameAction } from './types/domain';\r\n\r\n// Global instances\r\nlet gameRoom: P2PGameRoom | null = null;\r\nlet gameClient: P2PGameClient | null = null;\r\nlet currentPlayerId: string = '';\r\n\r\n// Main application initialization\r\nfunction initApp() {\r\n  const app = document.getElementById('app');\r\n  \r\n  if (!app) {\r\n    console.error('App mount point not found');\r\n    return;\r\n  }\r\n  \r\n  // Render UI\r\n  app.innerHTML = `\r\n    <div class=\"container\">\r\n      <h1>ðŸŽ® Century: Golem Edition</h1>\r\n      <p class=\"subtitle\">Peer-to-Peer Multiplayer - No Server Required</p>\r\n      \r\n      <div class=\"tabs\">\r\n        <button class=\"tab-btn active\" data-tab=\"create\">Create Room</button>\r\n        <button class=\"tab-btn\" data-tab=\"join\">Join Room</button>\r\n      </div>\r\n      \r\n      <div class=\"tab-content active\" id=\"create-tab\">\r\n        <h2>Create a Game Room</h2>\r\n        <form id=\"create-form\">\r\n          <div class=\"form-group\">\r\n            <label>Number of Players:</label>\r\n            <input type=\"number\" id=\"player-count\" min=\"2\" max=\"5\" value=\"3\" />\r\n          </div>\r\n          <button type=\"submit\" class=\"btn-primary\">Create Room</button>\r\n        </form>\r\n        <div id=\"room-info\" style=\"display:none;\">\r\n          <h3>Room Created!</h3>\r\n          <p>Share this room code with other players:</p>\r\n          <div class=\"room-code\" id=\"room-code-display\"></div>\r\n          <p>Share this peer ID:</p>\r\n          <div class=\"peer-id\" id=\"peer-id-display\"></div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"tab-content\" id=\"join-tab\">\r\n        <h2>Join a Game Room</h2>\r\n        <form id=\"join-form\">\r\n          <div class=\"form-group\">\r\n            <label>Room Code:</label>\r\n            <input type=\"text\" id=\"room-code-input\" placeholder=\"e.g., A3F9K2\" />\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label>Host Peer ID:</label>\r\n            <input type=\"text\" id=\"host-peer-id-input\" placeholder=\"Provided by host\" />\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label>Your Name:</label>\r\n            <input type=\"text\" id=\"player-name-input\" placeholder=\"Enter your name\" />\r\n          </div>\r\n          <button type=\"submit\" class=\"btn-primary\">Join Room</button>\r\n        </form>\r\n      </div>\r\n      \r\n      <div id=\"game-area\" style=\"display:none;\">\r\n        <h2>Game in Progress</h2>\r\n        \r\n        <div id=\"player-identity\" style=\"margin-bottom: 15px; padding: 10px; background: rgba(255,255,255,0.1); border-radius: 4px;\">\r\n          <strong>You are:</strong> <span id=\"your-player-name\"></span>\r\n          <span id=\"host-indicator\" style=\"margin-left: 10px; display:none;\">(HOST)</span>\r\n        </div>\r\n        \r\n        <div id=\"turn-status\" style=\"margin-bottom: 15px; padding: 10px; background: rgba(255,255,255,0.1); border-radius: 4px; font-size: 1.1em;\">\r\n          <strong id=\"turn-message\">Waiting...</strong>\r\n        </div>\r\n        \r\n        <div id=\"game-status\" style=\"margin-bottom: 20px; font-size: 0.9em; opacity: 0.8;\"></div>\r\n        \r\n        <div id=\"game-actions\" style=\"display:flex; gap:10px; flex-wrap:wrap;\">\r\n          <button class=\"btn-primary\" id=\"action-play-card\" disabled>Play Card</button>\r\n          <button class=\"btn-primary\" id=\"action-take-merchant\" disabled>Take Merchant Card</button>\r\n          <button class=\"btn-primary\" id=\"action-claim-vp\" disabled>Claim Victory Points</button>\r\n          <button class=\"btn-primary\" id=\"action-rest\" disabled>Rest (Take All Cards)</button>\r\n        </div>\r\n        \r\n        <div id=\"action-result\" style=\"margin-top: 20px; padding: 10px; border-radius: 4px; display:none;\"></div>\r\n      </div>\r\n    </div>\r\n  `;\r\n  \r\n  setupEventListeners();\r\n}\r\n\r\nfunction setupEventListeners() {\r\n  // Tab switching\r\n  const tabButtons = document.querySelectorAll('.tab-btn');\r\n  tabButtons.forEach(button => {\r\n    button.addEventListener('click', () => {\r\n      const tabName = button.getAttribute('data-tab');\r\n      if (tabName) {\r\n        switchTab(tabName);\r\n      }\r\n    });\r\n  });\r\n  \r\n  // Create room form\r\n  const createForm = document.getElementById('create-form');\r\n  createForm?.addEventListener('submit', handleCreateRoom);\r\n  \r\n  // Join room form\r\n  const joinForm = document.getElementById('join-form');\r\n  joinForm?.addEventListener('submit', handleJoinRoom);\r\n  \r\n  // Game action buttons\r\n  document.getElementById('action-play-card')?.addEventListener('click', () => handleGameAction('play-card'));\r\n  document.getElementById('action-take-merchant')?.addEventListener('click', () => handleGameAction('take-merchant'));\r\n  document.getElementById('action-claim-vp')?.addEventListener('click', () => handleGameAction('claim-vp'));\r\n  document.getElementById('action-rest')?.addEventListener('click', () => handleGameAction('rest'));\r\n}\r\n\r\nfunction switchTab(tabName: string) {\r\n  // Update buttons\r\n  document.querySelectorAll('.tab-btn').forEach(btn => {\r\n    btn.classList.remove('active');\r\n  });\r\n  document.querySelector(`[data-tab=\"${tabName}\"]`)?.classList.add('active');\r\n  \r\n  // Update content\r\n  document.querySelectorAll('.tab-content').forEach(content => {\r\n    content.classList.remove('active');\r\n  });\r\n  document.getElementById(`${tabName}-tab`)?.classList.add('active');\r\n}\r\n\r\nasync function handleCreateRoom(event: Event) {\r\n  event.preventDefault();\r\n  \r\n  const playerCount = parseInt((document.getElementById('player-count') as HTMLInputElement).value);\r\n  const roomInfo = document.getElementById('room-info');\r\n  const codeDisplay = document.getElementById('room-code-display');\r\n  const peerDisplay = document.getElementById('peer-id-display');\r\n  \r\n  if (!roomInfo || !codeDisplay || !peerDisplay) return;\r\n  \r\n  try {\r\n    // Create P2P room\r\n    gameRoom = new P2PGameRoom();\r\n    \r\n    // Set up event listeners\r\n    gameRoom.on('room-created', ({ roomCode, hostPeerId }) => {\r\n      codeDisplay.textContent = roomCode;\r\n      peerDisplay.textContent = hostPeerId;\r\n      roomInfo.style.display = 'block';\r\n    });\r\n    \r\n    gameRoom.on('peer-connected', ({ peerId, playerName }) => {\r\n      alert(`Player ${playerName} joined the room!`);\r\n    });\r\n    \r\n    gameRoom.on('game-state-updated', (game) => {\r\n      // Host also sees game updates\r\n      const gameArea = document.getElementById('game-area');\r\n      if (gameArea && game.phase === 'PLAYING') {\r\n        gameArea.style.display = 'block';\r\n        \r\n        // Set host identity on first game state\r\n        if (!currentPlayerId) {\r\n          currentPlayerId = game.players[0].id; // Host is first player\r\n          const playerNameEl = document.getElementById('your-player-name');\r\n          if (playerNameEl) {\r\n            playerNameEl.textContent = game.players[0].name;\r\n          }\r\n          const hostIndicator = document.getElementById('host-indicator');\r\n          if (hostIndicator) {\r\n            hostIndicator.style.display = 'inline';\r\n          }\r\n        }\r\n        \r\n        updateGameUI(game);\r\n      }\r\n    });\r\n    \r\n    gameRoom.on('action-processed', (action, success) => {\r\n      if (success) {\r\n        showActionResult('Action processed successfully', 'success');\r\n      } else {\r\n        showActionResult('Action processing failed', 'error');\r\n      }\r\n    });\r\n    \r\n    gameRoom.on('room-error', (error: Error) => {\r\n      console.error('Room error:', error);\r\n      alert(`Error: ${error.message}`);\r\n    });\r\n    \r\n    // Generate player names\r\n    const playerNames = Array.from({ length: playerCount }, (_, i) => `Player ${i + 1}`);\r\n    \r\n    // Create room\r\n    await gameRoom.createRoom(playerNames);\r\n    \r\n  } catch (error) {\r\n    console.error('Failed to create room:', error);\r\n    alert(`Failed to create room: ${(error as Error).message}`);\r\n  }\r\n}\r\n\r\nasync function handleJoinRoom(event: Event) {\r\n  event.preventDefault();\r\n  \r\n  const roomCode = (document.getElementById('room-code-input') as HTMLInputElement).value;\r\n  const hostPeerId = (document.getElementById('host-peer-id-input') as HTMLInputElement).value;\r\n  const playerName = (document.getElementById('player-name-input') as HTMLInputElement).value;\r\n  \r\n  if (!roomCode || !hostPeerId || !playerName) {\r\n    alert('Please fill in all fields');\r\n    return;\r\n  }\r\n  \r\n  try {\r\n    // Create P2P client\r\n    gameClient = new P2PGameClient();\r\n    \r\n    // Set up event listeners\r\n    gameClient.on('connected', () => {\r\n      alert(`Successfully joined room ${roomCode}!`);\r\n      // Hide forms, show game area\r\n      document.getElementById('create-tab')!.style.display = 'none';\r\n      document.getElementById('join-tab')!.style.display = 'none';\r\n      const gameArea = document.getElementById('game-area');\r\n      if (gameArea) {\r\n        gameArea.style.display = 'block';\r\n        // Set player identity\r\n        const playerNameEl = document.getElementById('your-player-name');\r\n        if (playerNameEl) {\r\n          playerNameEl.textContent = playerName;\r\n        }\r\n      }\r\n    });\r\n    \r\n    gameClient.on('disconnected', () => {\r\n      showActionResult('Disconnected from room', 'error');\r\n    });\r\n    \r\n    gameClient.on('host-disconnected', () => {\r\n      const gameArea = document.getElementById('game-area');\r\n      if (gameArea) {\r\n        gameArea.innerHTML = `\r\n          <h2>Game Ended</h2>\r\n          <p style=\"padding: 20px; background: rgba(244, 67, 54, 0.2); border-radius: 8px;\">\r\n            <strong>Host disconnected.</strong><br><br>\r\n            The host has closed their browser or lost connection.<br>\r\n            The game cannot continue without the host.<br><br>\r\n            Please refresh to start a new game.\r\n          </p>\r\n        `;\r\n      }\r\n    });\r\n    \r\n    gameClient.on('game-state-received', (game) => {\r\n      updateGameUI(game);\r\n    });\r\n    \r\n    gameClient.on('action-accepted', (action) => {\r\n      showActionResult('Action accepted! Waiting for state update...', 'success');\r\n    });\r\n    \r\n    gameClient.on('action-rejected', (action, error) => {\r\n      showActionResult(`Action rejected: ${error}`, 'error');\r\n    });\r\n    \r\n    gameClient.on('error', (error: Error) => {\r\n      console.error('Client error:', error);\r\n      alert(`Error: ${error.message}`);\r\n    });\r\n    \r\n    // Generate player ID and store it\r\n    currentPlayerId = `player_${Date.now()}`;\r\n    \r\n    // Join room\r\n    await gameClient.joinRoomWithPeerId(roomCode, hostPeerId, currentPlayerId, playerName);\r\n    \r\n  } catch (error) {\r\n    console.error('Failed to join room:', error);\r\n    alert(`Failed to join room: ${(error as Error).message}`);\r\n  }\r\n}\r\n\r\nfunction generateRoomCode(): string {\r\n  const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';\r\n  let code = '';\r\n  for (let i = 0; i < 6; i++) {\r\n    code += chars.charAt(Math.floor(Math.random() * chars.length));\r\n  }\r\n  return code;\r\n}\r\n\r\n// Game action handler\r\nasync function handleGameAction(actionType: string) {\r\n  if (!gameClient) {\r\n    showActionResult('Not connected to a room', 'error');\r\n    return;\r\n  }\r\n  \r\n  if (!currentPlayerId) {\r\n    showActionResult('Player ID not set', 'error');\r\n    return;\r\n  }\r\n  \r\n  try {\r\n    let action: GameAction;\r\n    \r\n    switch (actionType) {\r\n      case 'rest':\r\n        action = {\r\n          type: ActionType.Rest,\r\n          playerId: currentPlayerId,\r\n          timestamp: Date.now()\r\n        };\r\n        break;\r\n        \r\n      case 'play-card':\r\n        // For demo: play first card in hand\r\n        showActionResult('Select a card to play (UI not implemented)', 'error');\r\n        return;\r\n        \r\n      case 'take-merchant':\r\n        // For demo: take first available merchant card\r\n        showActionResult('Select a merchant card (UI not implemented)', 'error');\r\n        return;\r\n        \r\n      case 'claim-vp':\r\n        // For demo: claim first available victory point card\r\n        showActionResult('Select a victory point card (UI not implemented)', 'error');\r\n        return;\r\n        \r\n      default:\r\n        showActionResult('Unknown action type', 'error');\r\n        return;\r\n    }\r\n    \r\n    // Send action to host via P2P\r\n    showActionResult('Waiting for host...', 'info');\r\n    await gameClient.sendAction(action);\r\n    \r\n  } catch (error) {\r\n    showActionResult(`Failed to send action: ${(error as Error).message}`, 'error');\r\n  }\r\n}\r\n\r\n// Update UI with game state\r\nfunction updateGameUI(game: any) {\r\n  const currentPlayer = game.players[game.currentPlayerIndex];\r\n  const isMyTurn = currentPlayer?.id === currentPlayerId;\r\n  const myPlayer = game.players.find((p: any) => p.id === currentPlayerId);\r\n  \r\n  // Update turn status message\r\n  const turnMessage = document.getElementById('turn-message');\r\n  if (turnMessage) {\r\n    if (isMyTurn) {\r\n      turnMessage.textContent = 'Your turn';\r\n      turnMessage.style.color = '#4caf50';\r\n    } else {\r\n      turnMessage.textContent = `Waiting for ${currentPlayer?.name || 'Unknown'}`;\r\n      turnMessage.style.color = '#ff9800';\r\n    }\r\n  }\r\n  \r\n  // Update game status details\r\n  const statusEl = document.getElementById('game-status');\r\n  if (statusEl) {\r\n    statusEl.textContent = `Turn ${game.turnNumber} â€¢ ${game.phase} â€¢ ${game.players.length} players`;\r\n  }\r\n  \r\n  // Enable/disable action buttons based on turn\r\n  const actionButtons = document.querySelectorAll('#game-actions button');\r\n  actionButtons.forEach((btn: any) => {\r\n    btn.disabled = !isMyTurn;\r\n    btn.style.opacity = isMyTurn ? '1' : '0.5';\r\n    btn.style.cursor = isMyTurn ? 'pointer' : 'not-allowed';\r\n  });\r\n  \r\n  // Hide action feedback when state updates\r\n  const actionResult = document.getElementById('action-result');\r\n  if (actionResult && actionResult.textContent.includes('Waiting for host')) {\r\n    actionResult.style.display = 'none';\r\n  }\r\n}\r\n\r\n// Show action result feedback\r\nfunction showActionResult(message: string, type: 'success' | 'error' | 'info') {\r\n  const resultEl = document.getElementById('action-result');\r\n  if (!resultEl) return;\r\n  \r\n  resultEl.textContent = message;\r\n  resultEl.style.display = 'block';\r\n  \r\n  // Color coding\r\n  if (type === 'success') {\r\n    resultEl.style.backgroundColor = '#4caf50';\r\n    resultEl.style.color = 'white';\r\n  } else if (type === 'error') {\r\n    resultEl.style.backgroundColor = '#f44336';\r\n    resultEl.style.color = 'white';\r\n  } else {\r\n    resultEl.style.backgroundColor = '#2196f3';\r\n    resultEl.style.color = 'white';\r\n  }\r\n  \r\n  // Auto-hide after 5 seconds\r\n  setTimeout(() => {\r\n    if (resultEl) {\r\n      resultEl.style.display = 'none';\r\n    }\r\n  }, 5000);\r\n}\r\n\r\n// Initialize when DOM is ready\r\nif (document.readyState === 'loading') {\r\n  document.addEventListener('DOMContentLoaded', initApp);\r\n} else {\r\n  initApp();\r\n}\r\n"],"names":["gameRoom","gameClient","currentPlayerId","initApp","app","document","getElementById","innerHTML","querySelectorAll","forEach","button","addEventListener","tabName","getAttribute","btn","classList","remove","querySelector","add","content","switchTab","createForm","handleCreateRoom","joinForm","handleJoinRoom","handleGameAction","setupEventListeners","console","error","async","event","preventDefault","playerCount","parseInt","value","roomInfo","codeDisplay","peerDisplay","P2PGameRoom","on","roomCode","hostPeerId","textContent","style","display","peerId","playerName","alert","game","gameArea","phase","players","id","playerNameEl","name","hostIndicator","updateGameUI","action","success","showActionResult","message","playerNames","Array","from","length","_","i","createRoom","P2PGameClient","Date","now","joinRoomWithPeerId","actionType","type","ActionType","Rest","playerId","timestamp","sendAction","currentPlayer","currentPlayerIndex","isMyTurn","find","p","turnMessage","color","statusEl","turnNumber","disabled","opacity","cursor","actionResult","includes","resultEl","backgroundColor","setTimeout","readyState"],"mappings":"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"}