import{P as e,a as o}from"./p2p-BS3IVwR3.js";import"./peerjs-BtN9W7or.js";import"./engine-BQ72Hb5e.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&o(e)}).observe(document,{childList:!0,subtree:!0})}function o(e){if(e.ep)return;e.ep=!0;const o=function(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?o.credentials="include":"anonymous"===e.crossOrigin?o.credentials="omit":o.credentials="same-origin",o}(e);fetch(e.href,o)}}();let t=null,n=null;function r(){console.log("initApp called");const e=document.getElementById("app");e?(console.log("App element found, rendering UI..."),e.innerHTML='\n    <div class="container">\n      <h1>ðŸŽ® Century: Golem Edition</h1>\n      <p class="subtitle">Peer-to-Peer Multiplayer - No Server Required</p>\n      \n      <div class="tabs">\n        <button class="tab-btn active" data-tab="create">Create Room</button>\n        <button class="tab-btn" data-tab="join">Join Room</button>\n      </div>\n      \n      <div class="tab-content active" id="create-tab">\n        <h2>Create a Game Room</h2>\n        <form id="create-form">\n          <div class="form-group">\n            <label>Number of Players:</label>\n            <input type="number" id="player-count" min="2" max="5" value="3" />\n          </div>\n          <button type="submit" class="btn-primary">Create Room</button>\n        </form>\n        <div id="room-info" style="display:none;">\n          <h3>Room Created!</h3>\n          <p>Share this room code with other players:</p>\n          <div class="room-code" id="room-code-display"></div>\n          <p>Share this peer ID:</p>\n          <div class="peer-id" id="peer-id-display"></div>\n        </div>\n      </div>\n      \n      <div class="tab-content" id="join-tab">\n        <h2>Join a Game Room</h2>\n        <form id="join-form">\n          <div class="form-group">\n            <label>Room Code:</label>\n            <input type="text" id="room-code-input" placeholder="e.g., A3F9K2" />\n          </div>\n          <div class="form-group">\n            <label>Host Peer ID:</label>\n            <input type="text" id="host-peer-id-input" placeholder="Provided by host" />\n          </div>\n          <div class="form-group">\n            <label>Your Name:</label>\n            <input type="text" id="player-name-input" placeholder="Enter your name" />\n          </div>\n          <button type="submit" class="btn-primary">Join Room</button>\n        </form>\n      </div>\n      \n      <div id="game-area" style="display:none;">\n        <h2>Game in Progress</h2>\n        <div id="game-status"></div>\n      </div>\n    </div>\n  ',console.log("UI rendered, setting up listeners..."),function(){document.querySelectorAll(".tab-btn").forEach(e=>{e.addEventListener("click",()=>{const o=e.getAttribute("data-tab");o&&function(e){document.querySelectorAll(".tab-btn").forEach(e=>{e.classList.remove("active")}),document.querySelector(`[data-tab="${e}"]`)?.classList.add("active"),document.querySelectorAll(".tab-content").forEach(e=>{e.classList.remove("active")}),document.getElementById(`${e}-tab`)?.classList.add("active")}(o)})});const e=document.getElementById("create-form");e?.addEventListener("submit",a);const o=document.getElementById("join-form");o?.addEventListener("submit",l)}(),console.log("App initialized successfully!")):console.error("App mount point not found")}async function a(o){o.preventDefault();const n=parseInt(document.getElementById("player-count").value),r=document.getElementById("room-info"),a=document.getElementById("room-code-display"),l=document.getElementById("peer-id-display");if(r&&a&&l)try{t=new e,t.on("room-created",({roomCode:e,hostPeerId:o})=>{console.log("Room created:",e,o),a.textContent=e,l.textContent=o,r.style.display="block"}),t.on("peer-connected",({peerId:e,playerName:o})=>{console.log("Peer connected:",e,o),alert(`Player ${o} joined the room!`)}),t.on("room-error",e=>{console.error("Room error:",e),alert(`Error: ${e.message}`)});const o=Array.from({length:n},(e,o)=>`Player ${o+1}`);await t.createRoom(o)}catch(i){console.error("Failed to create room:",i),alert(`Failed to create room: ${i.message}`)}}async function l(e){e.preventDefault();const t=document.getElementById("room-code-input").value,r=document.getElementById("host-peer-id-input").value,a=document.getElementById("player-name-input").value;if(t&&r&&a)try{n=new o,n.on("connected",()=>{console.log("Connected to room"),alert(`Successfully joined room ${t}!`),document.getElementById("create-tab").style.display="none",document.getElementById("join-tab").style.display="none";const e=document.getElementById("game-area");e&&(e.style.display="block",document.getElementById("game-status").textContent=`Connected as ${a}`)}),n.on("disconnected",()=>{console.log("Disconnected from room"),alert("Disconnected from room")}),n.on("game-state-received",e=>{console.log("Game state received:",e);const o=document.getElementById("game-status");o&&(o.textContent=`Game Turn: ${e.turnNumber} | Phase: ${e.phase}`)}),n.on("error",e=>{console.error("Client error:",e),alert(`Error: ${e.message}`)});const e=`player_${Date.now()}`;console.log("Joining room:",{roomCode:t,hostPeerId:r,playerId:e,playerName:a}),await n.joinRoomWithPeerId(t,r,e,a)}catch(l){console.error("Failed to join room:",l),alert(`Failed to join room: ${l.message}`)}else alert("Please fill in all fields")}console.log("Script loaded, readyState:",document.readyState),"loading"===document.readyState?(console.log("Waiting for DOMContentLoaded..."),document.addEventListener("DOMContentLoaded",()=>{console.log("DOMContentLoaded fired"),r()})):(console.log("DOM already ready, initializing..."),r());
//# sourceMappingURL=main-L4ZzqXcY.js.map
