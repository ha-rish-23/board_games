import{P as e,a as t}from"./p2p-Cc6kANur.js";import{A as n}from"./engine-CCVkibka.js";import"./peerjs-BtN9W7or.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();let o=null,r=null,a="";function i(){const e=document.getElementById("app");e?(e.innerHTML='\n    <div class="container">\n      <h1>ðŸŽ® Century: Golem Edition</h1>\n      <p class="subtitle">Peer-to-Peer Multiplayer - No Server Required</p>\n      \n      <div class="tabs">\n        <button class="tab-btn active" data-tab="create">Create Room</button>\n        <button class="tab-btn" data-tab="join">Join Room</button>\n      </div>\n      \n      <div class="tab-content active" id="create-tab">\n        <h2>Create a Game Room</h2>\n        <form id="create-form">\n          <div class="form-group">\n            <label>Number of Players:</label>\n            <input type="number" id="player-count" min="2" max="5" value="3" />\n          </div>\n          <button type="submit" class="btn-primary">Create Room</button>\n        </form>\n        <div id="room-info" style="display:none;">\n          <h3>Room Created!</h3>\n          <p>Share this room code with other players:</p>\n          <div class="room-code" id="room-code-display"></div>\n          <p>Share this peer ID:</p>\n          <div class="peer-id" id="peer-id-display"></div>\n        </div>\n      </div>\n      \n      <div class="tab-content" id="join-tab">\n        <h2>Join a Game Room</h2>\n        <form id="join-form">\n          <div class="form-group">\n            <label>Room Code:</label>\n            <input type="text" id="room-code-input" placeholder="e.g., A3F9K2" />\n          </div>\n          <div class="form-group">\n            <label>Host Peer ID:</label>\n            <input type="text" id="host-peer-id-input" placeholder="Provided by host" />\n          </div>\n          <div class="form-group">\n            <label>Your Name:</label>\n            <input type="text" id="player-name-input" placeholder="Enter your name" />\n          </div>\n          <button type="submit" class="btn-primary">Join Room</button>\n        </form>\n      </div>\n      \n      <div id="game-area" style="display:none;">\n        <h2>Game in Progress</h2>\n        <div id="game-status" style="margin-bottom: 20px;"></div>\n        \n        <div id="game-actions" style="display:flex; gap:10px; flex-wrap:wrap;">\n          <button class="btn-primary" id="action-play-card">Play Card</button>\n          <button class="btn-primary" id="action-take-merchant">Take Merchant Card</button>\n          <button class="btn-primary" id="action-claim-vp">Claim Victory Points</button>\n          <button class="btn-primary" id="action-rest">Rest (Take All Cards)</button>\n        </div>\n        \n        <div id="action-result" style="margin-top: 20px; padding: 10px; border-radius: 4px; display:none;"></div>\n      </div>\n    </div>\n  ',function(){document.querySelectorAll(".tab-btn").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-tab");t&&function(e){document.querySelectorAll(".tab-btn").forEach(e=>{e.classList.remove("active")}),document.querySelector(`[data-tab="${e}"]`)?.classList.add("active"),document.querySelectorAll(".tab-content").forEach(e=>{e.classList.remove("active")}),document.getElementById(`${e}-tab`)?.classList.add("active")}(t)})});const e=document.getElementById("create-form");e?.addEventListener("submit",c);const t=document.getElementById("join-form");t?.addEventListener("submit",d),document.getElementById("action-play-card")?.addEventListener("click",()=>s("play-card")),document.getElementById("action-take-merchant")?.addEventListener("click",()=>s("take-merchant")),document.getElementById("action-claim-vp")?.addEventListener("click",()=>s("claim-vp")),document.getElementById("action-rest")?.addEventListener("click",()=>s("rest"))}()):console.error("App mount point not found")}async function c(t){t.preventDefault();const n=parseInt(document.getElementById("player-count").value),r=document.getElementById("room-info"),a=document.getElementById("room-code-display"),i=document.getElementById("peer-id-display");if(r&&a&&i)try{o=new e,o.on("room-created",({roomCode:e,hostPeerId:t})=>{a.textContent=e,i.textContent=t,r.style.display="block"}),o.on("peer-connected",({peerId:e,playerName:t})=>{alert(`Player ${t} joined the room!`)}),o.on("game-state-updated",e=>{const t=document.getElementById("game-area");t&&"SETUP"!==e.phase&&(t.style.display="block",l(e))}),o.on("action-processed",(e,t)=>{t?m("Action processed successfully","success"):m("Action processing failed","error")}),o.on("room-error",e=>{console.error("Room error:",e),alert(`Error: ${e.message}`)});const t=Array.from({length:n},(e,t)=>`Player ${t+1}`);await o.createRoom(t)}catch(c){console.error("Failed to create room:",c),alert(`Failed to create room: ${c.message}`)}}async function d(e){e.preventDefault();const n=document.getElementById("room-code-input").value,o=document.getElementById("host-peer-id-input").value,i=document.getElementById("player-name-input").value;if(n&&o&&i)try{r=new t,r.on("connected",()=>{alert(`Successfully joined room ${n}!`),document.getElementById("create-tab").style.display="none",document.getElementById("join-tab").style.display="none";const e=document.getElementById("game-area");e&&(e.style.display="block",document.getElementById("game-status").textContent=`Connected as ${i}`)}),r.on("disconnected",()=>{alert("Disconnected from room")}),r.on("game-state-received",e=>{l(e)}),r.on("action-accepted",e=>{m("Action accepted! Waiting for state update...","success")}),r.on("action-rejected",(e,t)=>{m(`Action rejected: ${t}`,"error")}),r.on("error",e=>{console.error("Client error:",e),alert(`Error: ${e.message}`)}),a=`player_${Date.now()}`,await r.joinRoomWithPeerId(n,o,a,i)}catch(c){console.error("Failed to join room:",c),alert(`Failed to join room: ${c.message}`)}else alert("Please fill in all fields")}async function s(e){if(r)if(a)try{let t;switch(e){case"rest":t={type:n.Rest,playerId:a,timestamp:Date.now()};break;case"play-card":return void m("Select a card to play (UI not implemented)","error");case"take-merchant":return void m("Select a merchant card (UI not implemented)","error");case"claim-vp":return void m("Select a victory point card (UI not implemented)","error");default:return void m("Unknown action type","error")}m("Sending action to host...","info"),await r.sendAction(t)}catch(t){m(`Failed to send action: ${t.message}`,"error")}else m("Player ID not set","error");else m("Not connected to a room","error")}function l(e){const t=document.getElementById("game-status");if(t){const n=e.players[e.currentPlayerIndex],o=n?.id===a;t.innerHTML=`\n      <div><strong>Turn:</strong> ${e.turnNumber} | <strong>Phase:</strong> ${e.phase}</div>\n      <div><strong>Current Player:</strong> ${n?.name||"Unknown"} ${o?"(YOUR TURN)":""}</div>\n      <div><strong>Players:</strong> ${e.players.length}</div>\n    `}const n=e.players[e.currentPlayerIndex]?.id===a;document.querySelectorAll("#game-actions button").forEach(e=>{e.disabled=!n,e.style.opacity=n?"1":"0.5"})}function m(e,t){const n=document.getElementById("action-result");n&&(n.textContent=e,n.style.display="block","success"===t?(n.style.backgroundColor="#4caf50",n.style.color="white"):"error"===t?(n.style.backgroundColor="#f44336",n.style.color="white"):(n.style.backgroundColor="#2196f3",n.style.color="white"),setTimeout(()=>{n&&(n.style.display="none")},5e3))}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",i):i();
//# sourceMappingURL=main-BSXhTWtn.js.map
